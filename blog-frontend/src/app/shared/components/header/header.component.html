<mat-toolbar color="primary" class="pixel-header">
  
  <!-- Mobile menu button -->

    <span (click)="onMobileMenuToggle()" class="pixel-icon">
      <svg width="20" viewBox="0 0 20 20" class="hover:text-blue transition-colors duration-500 hover:scale-98"><g class="fill-icon"><path d="M17 1H3V3H17V1Z"></path><path d="M19 3H17V17H19V3Z"></path><path d="M17 17H3V19H17V17Z"></path><path d="M3 3H1V17H3V3Z"></path><path d="M8 3H6V17H8V3Z"></path></g><g class="fill-icon-secondary"><path d="M10 9H12V11H10V9Z"></path><path d="M12 11H14V13H12V11Z"></path><path d="M12 7H14V9H12V7Z"></path></g></svg>
    </span>


  <!-- Logo -->
  <a routerLink="/" class="pixel-logo">
    
    <span class="logo-text">/PIXEL BLOG</span>
  </a>

  <!-- Spacer -->
  <span class="spacer"></span>

  <!-- Desktop Navigation -->
  <nav class="desktop-nav">
    <a mat-button routerLink="/" routerLinkActive="active-link" class="pixel-nav-btn">
      <!-- <span class="nav-icon">ğŸ </span> -->
      <span>HOME</span>
    </a>
    <a mat-button routerLink="/users" routerLinkActive="active-link" class="pixel-nav-btn">
      <!-- <span class="nav-icon">ğŸ”</span> -->
      <span>USERS</span>
    </a>
    <a mat-button routerLink="/posts/create" routerLinkActive="active-link" class="pixel-nav-btn">
      <!-- <span class="nav-icon">â•</span> -->
      <span>CREATE</span>
    </a>
  </nav>

  <!-- Theme Toggle -->
  <app-theme-toggle></app-theme-toggle>

  <!-- Notifications -->
  <app-notification-badge></app-notification-badge>

  <!-- User Menu -->
  @if (currentUser(); as user) {
    <span [matMenuTriggerFor]="userMenu" class="pixel-user-btn">
       @if (currentUser()?.avatar) {
            <img [src]="getAvatarUrl(currentUser()?.avatar)" [alt]="user.fullName" class="avatar">
          } @else {

            <div class="avatar-placeholder">
              {{ getInitials(user.fullName) }}
            </div> 
          }
        </span>
    
    <mat-menu #userMenu="matMenu" class="pixel-menu">
      <div class="pixel-user-info">
        <div class="user-name">{{ user.fullName }}</div>
        <div class="user-username">@{{ user.username }}</div>
      </div>
      <mat-divider></mat-divider>
      
      <a mat-menu-item [routerLink]="'/users/profile/'+user.username" class="pixel-menu-item">
        <span class="menu-icon">ğŸ‘¤</span>
        MY PROFILE
      </a>
      
      <a mat-menu-item routerLink="/settings" class="pixel-menu-item">
        <span class="menu-icon">âš™ï¸</span>
        SETTINGS
      </a>
      
      @if (user.role === 'ADMIN') {
        <mat-divider></mat-divider>
        <a mat-menu-item routerLink="/admin" class="pixel-menu-item">
          <span class="menu-icon">ğŸ‘‘</span>
          ADMIN PANEL
        </a>
      }
      
      <mat-divider></mat-divider>
      
      <button mat-menu-item (click)="onLogout()" class="pixel-menu-item logout">
        <span class="menu-icon">ğŸšª</span>
        LOGOUT
      </button>
    </mat-menu>
  }

</mat-toolbar>